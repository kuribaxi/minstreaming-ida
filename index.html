<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Min Streamingsida</title>
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    <style>
        body { 
            margin: 0; 
            background: #1a1a1a; 
            color: #fff; 
            font-family: Arial, sans-serif; 
            height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            overflow: hidden;
        }
        .player-wrapper {
            position: relative;
            width: 800px;
            height: 450px;
            z-index: 1;
        }
        .video-container {
            width: 100%;
            height: 100%;
            display: none;
        }
        .channel-circle {
            position: absolute;
            width: 1200px;
            height: 1200px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            overflow: hidden;
        }
        .channel-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: transform 0.5s ease;
        }
        .channel {
            position: absolute;
            background: #333;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            pointer-events: all;
            text-align: center;
            font-size: 0.9em;
            white-space: nowrap;
        }
        .channel:hover {
            background: #e50914;
            transform: scale(1.1);
        }
        .channel.favorite {
            border: 2px solid #ffd700;
            background: #444;
        }
        h1 {
            text-align: center;
            color: #e50914;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="player-wrapper">
        <h1>Min Streamingsida</h1>
        <div class="video-container">
            <video id="main-video" class="video-js vjs-default-skin" controls width="100%" height="100%">
                <source src="" type="application/x-mpegURL">
            </video>
        </div>
        <div class="channel-circle" id="channelCircle">
            <div class="channel-ring" id="channelRing"></div>
        </div>
    </div>

    <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const mainPlayer = videojs('main-video', {
                fluid: true,
                responsive: true,
                html5: {
                    hls: { overrideNative: true }
                }
            });
            const videoContainer = document.querySelector('.video-container');
            const channelRing = document.getElementById('channelRing');
            let favorites = JSON.parse(localStorage.getItem('favorites')) || [];

            function formatChannelName(url) {
                const namePart = url.split('/').pop().replace('.html', '').replace(/-/g, ' ');
                return namePart.split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
            }

            const channels = [
                { name: "Zagros", url: "https://5a3ed7a72ed4b.streamlock.net/zagrostv/SMIL:myStream.smil/playlist.m3u8" },
                { name: "Zoom", url: "https://live.zoomnews.info/live/Zoom_playlist.m3u8" },
                { name: "Kanal8", url: "https://live.channel8.com/Channel8-Kurdish/index.fmp4.m3u8" },
                { name: "Rudaw", url: "https://svs.itworkscdn.net/rudawlive/rudawlive.smil/playlist.m3u8" },
                { name: "Kurdsat News", url: "https://kurdsat-news.akamaized.net/hls/kurdsat-news.m3u8" },
                { name: "Sterk", url: "https://muzkurd.com/sterktv/sterk/chunklist_w913361557.m3u8" },
                { name: "NRT News", url: "https://media.streambrothers.com:1936/8226/8226/playlist.m3u8" },
                { name: "Kurdistan24", url: "https://d1x82nydcxndze.cloudfront.net/live/index_720p25.m3u8" },
                { name: "4 Kurd", url: "https://4kuhls.persiana.live/hls/stream.m3u8" },
                { name: "Med Music", url: "http://54.36.110.140/live3/live3.m3u8" },
                { name: "Aryen", url: "https://aryen.tv/live/tv/playlist.m3u8" },
                { name: "Cira", url: "https://cira-tv.akamaized.net/hls/stream_0.m3u8" },
                { name: "Waar", url: "https://live.kwikmotion.com/waarmedialive/waarmedia.smil/waarmediapublish/waarmedia_source/chunks.m3u8" },
                { name: "Rojava", url: "https://rojava-tv.akamaized.net/hls/rojava-tv.m3u8" },
                { name: "Kurdsat HD", url: "https://kurdsat.akamaized.net/hls/kurdsat.m3u8" },
                { name: "Kurdistan TV", url: "https://5a3ed7a72ed4b.streamlock.net/live/SMIL:myStream.smil/playlist.m3u8" },
                { name: "Baxche", url: "https://5dcabf026b188.streamlock.net/afarinTV/livestream/playlist.m3u8" },
                { name: "Afarin Kids", url: "https://65f16f0fdfc51.streamlock.net/afarinTV/livestream/playlist.m3u8" },
                { name: "Zarok Kurmanci", url: "https://zindikurmanci.zaroktv.com.tr/hls/0/stream.m3u8" },
                { name: "Zarok Sorani", url: "https://zindisorani.zaroktv.com.tr/hls/stream.m3u8" },
                // Lägg till fler kanaler från din ursprungliga lista här
            ];

            function generateChannelCircle() {
                const radius = 600; // Ökad radie för att rymma fler kanaler
                const totalChannels = channels.length;
                const angleStep = (2 * Math.PI) / totalChannels;

                channels.forEach((channel, index) => {
                    const angle = index * angleStep;
                    const x = Math.cos(angle) * radius;
                    const y = Math.sin(angle) * radius;

                    const channelDiv = document.createElement('div');
                    channelDiv.className = 'channel';
                    channelDiv.textContent = channel.name;
                    channelDiv.style.left = `calc(50% + ${x}px - 60px)`; // Justera för bredd
                    channelDiv.style.top = `calc(50% + ${y}px - 15px)`;  // Justera för höjd

                    if (favorites.includes(channel.name)) {
                        channelDiv.classList.add('favorite');
                    }

                    channelDiv.addEventListener('mouseenter', () => {
                        videoContainer.style.display = 'block';
                        playStream(channel.url);
                    });

                    channelDiv.addEventListener('mouseleave', () => {
                        mainPlayer.pause();
                    });

                    channelDiv.addEventListener('click', (e) => {
                        e.stopPropagation();
                        toggleFavorite(channel.name, channelDiv);
                    });

                    channelRing.appendChild(channelDiv);
                });
            }

            function toggleFavorite(channelName, element) {
                if (favorites.includes(channelName)) {
                    favorites = favorites.filter(fav => fav !== channelName);
                    element.classList.remove('favorite');
                } else {
                    favorites.push(channelName);
                    element.classList.add('favorite');
                }
                localStorage.setItem('favorites', JSON.stringify(favorites));
            }

            function playStream(url) {
                mainPlayer.src({ src: url, type: 'application/x-mpegURL' });
                mainPlayer.ready(function () {
                    mainPlayer.play().catch(error => {
                        console.error("Uppspelningsfel:", error);
                        alert("Kunde inte spela upp strömmen.");
                    });
                });
            }

            // Mus-hjul för att rotera ringen
            let rotation = 0;
            document.addEventListener('wheel', (e) => {
                rotation += e.deltaY * 0.1; // Rotationshastighet
                channelRing.style.transform = `rotate(${rotation}deg)`;
            });

            generateChannelCircle();
        });
    </script>
</body>
</html>
